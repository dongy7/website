<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">

    <title>Stock Data - George Imura</title>

    <link rel="canonical" href="http://georgeimura.com/stock/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/clean-blog.css">

    <!-- Chartjs -->
    <link rel="stylesheet" href="/bower_components/chartist/dist/chartist.min.css" >
    <script src="/bower_components/chartist/dist/chartist.min.js"></script>
    
    <!-- jQuery -->
    <script src="/js/jquery.min.js "></script>

    <!-- Custom Fonts -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>


<div class = "overlay">
<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">George Imura</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/">Home</a>
                </li>
                
                <li>
                    <a href="/about/">About</a>
                </li>
                
                <li>
                    <a href="/contact/">Contact</a>
                </li>
                
                <li>
                    
                </li>
                
                <li>
                    
                </li>
                
                <li>
                    <a href="/stock/">Stock Data</a>
                </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Page Header -->
<header class="intro-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="site-heading">
                    <h1>Stock Data</h1>
                    <hr class="small">
                    <span class="subheading"></span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Main Content -->
<section id="posts">
<div class="container">
	<div class="row">
		<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
			<p> <center><b>NASDAQ-100 Index Values</b></center> </p>





<input type="text" id="input" value = "Enter a Company Name" onfocus="if (this.value=='Enter a Company Name') this.value='';"/>
<input type="submit" id = "btn" value="Submit">

<div class="ct-chart ct-perfect-fourth">
<script>
  // returns date in year-month-date format
  function getDate(date) {
    var dd = date.getDate();
    var mm = date.getMonth()+1; //January is 0!
    var yyyy = date.getFullYear();

    if(dd<10) {
        dd='0'+dd
    }

    if(mm<10) {
        mm='0'+mm
    }
    return yyyy + '-' + mm + '-' + dd;
  }

  $(document).ready(function() {
    // Get the name from text field
    $('#btn').on('click', function() {
      var name = $('input').val();

      //json request url
      var prefix = "https://www.quandl.com/api/v1/datasets/WIKI/";
      var mid = ".json?trim_start=";
      var suffix = "&auth_token=1DA7DeyRx4GoZViFE8dd";

      //get today's and week ago's date
      var today = new Date();
      var oneWeekAgo = new Date();
      oneWeekAgo.setDate(oneWeekAgo.getDate() - 7);
      weekAgo = getDate(oneWeekAgo);

      //complete url
      var url = prefix + name + mid + weekAgo + suffix;
      //alert(url);
      $.getJSON(url, function(data) {
        //console.log(data)
        var stock = data['data'];

        var dates = [];  // dates
        var open = []; // open values
        var high = [];
        var low = [];
        var close = [];

        for(i = stock.length-1; i >= 0; i--) {
          dates.push(stock[i][0]);
          open.push(stock[i][1]);
          high.push(stock[i][2]);
          low.push(stock[i][3]);
          close.push(stock[i][4]);
        }


        var plot = {
          labels: dates,
          series: [open, high, low, close]
        }

        // var plugins = {
        //   plugins: [
        //     Chartist.plugins.ctPointLabels({
        //       textAnchor: 'middle'
        //     })
        //   ]
        // }

        // We are setting a few options for our chart and override the defaults
        var options = {
          // Don't draw the line chart points
          showPoint: true,
          // Disable line smoothing
          lineSmooth: true,
          // X-Axis specific configuration
          axisX: {
            // We can disable the grid for this axis
            showGrid: true,
            // and also don't show the label
            showLabel: true
          },
          // Y-Axis specific configuration
          axisY: {
            // Lets offset the chart a bit from the labels
            offset: 60,
            // The label interpolation function enables you to modify the values
            // used for the labels on each axis. Here we are converting the
            // values into million pound.
            // labelInterpolationFnc: function(value) {
            //   return '$' + value + 'B';
            // }
          }
      };


        new Chartist.Line('.ct-chart', plot, options);
      })
      .error(function() { alert("The requested entity does not exist"); });

    });

  });



  //json request url
  var prefix = "https://www.quandl.com/api/v1/datasets/NASDAQOMX/NDX.json?trim_start=";
  var mid = "&trim_end=";
  var suffix = "&auth_token=1DA7DeyRx4GoZViFE8dd";

  //get today's and week ago's date
  var today = new Date();
  var oneWeekAgo = new Date();
  oneWeekAgo.setDate(oneWeekAgo.getDate() - 7);
  today = getDate(today)
  weekAgo = getDate(oneWeekAgo)

  //complete url
  var url = prefix + weekAgo + mid + today + suffix;

  console.log(url);

  $.getJSON(url, function(data) {
    console.log(data)
    var stock = data['data']

    var dates = []  // dates
    var values = [] // index values
    for(i = stock.length-1; i >= 0; i--) {
      dates.push(stock[i][0])
      values.push(stock[i][1])
    }


    console.log(dates.length)
    console.log(values.length)
    var plot = {
      labels: dates,
      series: [values]
    }
    // We are setting a few options for our chart and override the defaults
    var options = {
      // Don't draw the line chart points
      showPoint: false,
      // Disable line smoothing
      lineSmooth: false,
      // X-Axis specific configuration
      axisX: {
        // We can disable the grid for this axis
        showGrid: true,
        // and also don't show the label
        showLabel: true
      },
      // Y-Axis specific configuration
      axisY: {
        // Lets offset the chart a bit from the labels
        offset: 60,
        // The label interpolation function enables you to modify the values
        // used for the labels on each axis. Here we are converting the
        // values into million pound.
        labelInterpolationFnc: function(value) {
          return '$' + value + 'B';
        }
      }
  };

    new Chartist.Line('.ct-chart', plot, options);
  });

</script>
</div>

		</div>
	</div>
</div>
<hr>
</section


    <!-- Footer -->
<footer>
    <section id = "footer">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="mailto:georgeimura1@gmail.com">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="https://www.facebook.com/george.imura">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="https://twitter.com/roguemirage">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="https://www.linkedin.com/in/georgeimura">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                </ul>
                <p class="copyright text-muted">Copyright &copy; George Imura 2015</p>
            </div>
        </div>
    </div>
  </section>
</footer>


<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/clean-blog.min.js "></script>


</body>
</div>

</html>
